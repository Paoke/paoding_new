<!doctype html>
<html lang="en" ng-app="enter">
<head>
    <meta charset="UTF-8">
    <title>活动报名</title>
    <meta name="description" content="庖丁科技众包服务平台携手国内外先进技术科研院所、顶级技术专家，以实现科技成果市场化为核心，为企业提供快速精准的需求匹配服务，从而实现企业以及科技资源的有效对接，帮助企业实现产业技术升级，助力先进技术完成产业化发展。" />
    <meta name="keywords" content="庖丁众包、智能技术、机械制造、健康医疗、材料科学、能源环保、生产流程优化"/>
    <meta name='viewport' content='user-scalable=no,width=750'>
    <link rel="stylesheet" href="{$Think.MOBILE}/css/common_new.css">
    <link rel="stylesheet" href="{$Think.MOBILE}/css/my.css">
    <link rel="stylesheet" href="{$Think.MOBILE}/css/index.css">
    <link rel="stylesheet" href="{$Think.MOBILE}/css/activity.css">
    <include file="./Template/5u/common/common.html" />
</head>
<style>
    .identify_tip2 {
        width: 420px;        
        position: fixed;
        top: 50%;
        left: 50%;
        transform:translate(-50%,-50%);
        background-color: #fff;
        z-index: 999;
        border-radius: 10px;
        text-align: center;
        padding-top: 30px;
        overflow: hidden;
    }
    .identify_tip2 p {
        font-size: 32px;
        color: #ff971d;
        text-align: center;
        margin: 20px auto 20px;
    }
    .identify_tip2 a {
        display: block;
        text-align: center;
        color: #999;
        font-size: 22px;
    }
    .close_tip2{
        margin-top: 30px;
        display: block;
        width: 420px;
        height: 90px;
        text-align: center;
        line-height: 90px;
        background: #f2f2f2;
        color: #999;
        font-size: 32px;
    }
</style>
<body style="padding-top:60px;overflow-x:hidden" ng-controller="enterCtrl">

<!-- 使用my.css 注册页面样式 -->
<input type="hidden" value="{$Think.session.userArr.user_id}" id="user_id">
<div class="mask" style="display:none;"></div>
<div class="identify_tip2" style="display:none;">
    <img src="{$Think.MOBILE}/images/bmcg.png" alt="">
    <p>活动报名成功</p>
    <a>待审核，谢谢！</a>
    <span class="close_tip2">关&nbsp;闭</span>
</div>
<div class="apply_choose">
    <div class="apply_choice">
        <div class="apply_choosing apply_choice_company">公司</div>
        <div class="apply_choosing apply_choice_personal">个人</div>
    </div>
    <div class="apply_choice_cancle">取消</div>
</div>
<form id="formID">
    <div class="regist_main">
        <div class="regist_input">
            <span class="star" style="color:red">*</span>
            <span class="regist_span">姓名</span>
            <input class="enter_ip" type="text" placeholder="输入您的真实姓名" name="name">
        </div>

        <div class="regist_input">
            <span class="star" style="color:red">*</span>
            <span class="regist_span">手机</span>
            <input class="enter_ip" type="number" placeholder="输入手机号码" name="mobile" oninput="if(this.value>11){this.value = this.value.substr(0,11)}">
        </div>

        <div class="regist_input">
            <span class="star" style="color:red">*</span>
            <span class="regist_span">公司</span>
            <input class="enter_ip" type="text" placeholder="输入公司名称" name="company">
        </div>

        <div class="regist_input">
            <span class="star" style="color:red">*</span>
            <span class="regist_span">职务</span>
            <input class="enter_ip" type="text" placeholder="请输入您所在公司职务" name="job">
        </div>

        <div class="regist_input" style="border:none">
            <span class="star" style="color:red">*</span>
            <span class="regist_span">关注领域</span>
            <span style="margin-left:20px;color:#ccc;font-size:20px">（最多选3项）</span>
        </div>
        <div class="demand_area" style="margin-top:-40px;">
            <div class="areas_main clear" style="margin-left:-30px;">
                <li class="areas_default">电子信息</li>
                <li class="areas_default">先进制造</li>
                <li class="areas_default">新材料</li>
                <li class="areas_default">新能源与节能</li>
                <li class="areas_default">环境保护</li>
                <li class="areas_default">健康医疗</li>
                <li class="areas_default">智能技术</li>
            </div>
        </div>

        <!--<div class="regist_input" style="border:none">-->
            <!--<p class="regist_span">贵公司的业务范围</p>-->
            <!--<input class="signUp_inp" type="text" placeholder="请输入贵公司的业务范围" maxlength="50" name="ywfw">-->
        <!--</div>-->

        <!--<div class="regist_input" style="border:none">-->
            <!--<p class="regist_span">您希望对接的技术</p>-->
            <!--<input class="signUp_inp" type="text" placeholder="请输入您希望对接的技术"  maxlength="50" name="js">-->
        <!--</div>-->

        <!--<div class="regist_input" style="border:none">-->
            <!--<p class="regist_span">您希望对接的需求</p>-->
            <!--<input class="signUp_inp" type="text" placeholder="请输入您希望对接的需求"  maxlength="50" name="xq">-->
        <!--</div>-->
    </div>
</form>

<div class="sec_return">
    <a onclick="javascript:history.go(-1);">
        <img class="return_icon" src="{$Think.MOBILE}/images/icon-common-return.png" alt="">
    </a>
    <a class="act_det_btn">
        确定
    </a>
</div>

</body>
<script src='{$Think.MOBILE}/js/jquery-3.0.0.min.js'></script>
<script src='{$Think.MOBILE}/js/angular.min.js'></script>
<script src='{$Think.MOBILE}/js/common.js'></script>
<script>   
    var lingyu_html;
    var hd_id = GetQueryString('data_id');
    var data = {};

    var app = angular.module('enter',[]);
    app.controller("enterCtrl",function ($scope,$http){

        $(".act_det_btn").on("click",function(){
            var li = $(".areas_main li"); 
            var count = $(".areas_selected").length; 
            for(var j = 0 ;j < $(".enter_ip").length;j++){           
                if($(".enter_ip").eq(j).val()==""){
                   $(".enter_ip").eq(j).focus();
                   tip_ct = "请填写完毕再提交";
                   tips.addtips(tip_ct);
                   return false;
                }
            };
            // 关注领域选中状态
            var li = $(".areas_main li");        
            for(var i = 0;i < li.length ; i++){
                if( li.eq(i).hasClass('areas_selected') ){               
                     lingyu_html = li.eq(i).html();
                }
            };
            if(count < 1){
                tip_ct = "请选择关注领域";
                tips.addtips(tip_ct);
                return false;
            }
            else{
                var t = $("#formID").serializeArray();
                $.each(t, function(){
                    data[this.name] = this.value;
                });
                data['hd_id'] = hd_id;
                data['lingyu'] = lingyu_html;
                data['user_id'] = $("#user_id").val();

               $http({
                   method:"POST",
                   data:data,
                   url:"/index.php/Mobile/Activity/enter",
                   headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                   transformRequest: function(obj) {
                       var str = [];
                       for (var p in obj) {
                           str.push(encodeURIComponent(p) + "=" + encodeURIComponent(obj[p]));
                       }
                       return str.join("&");
                   }
               }).then(function successCallback(response) {   
                        $(".identify_tip2").show();
                        $(".mask").show();
                   }, function errorCallback(response) {

                   });

            }
        })

    // 需求领域  限制可选3个
    $(".areas_main li").on("click",function(){
        var count = $(".areas_selected").length;
        if(count==3){
            $(this).addClass('areas_default').removeClass('areas_selected');
            return false;
        }
        else if($(this).hasClass('areas_default')){
            $(this).addClass('areas_selected').removeClass('areas_default');
        }
        else{
            $(this).addClass('areas_default').removeClass('areas_selected');
        }
    });

    $(".close_tip2").on("click",function(){
        window.location.href = "/index.php/Mobile/Activity/activity";
    })

})


    // $(".act_det_btn").on("click",function(){
    //     var li = $(".areas_main li"); 
    //     var count = $(".areas_selected").length; 
    //     for(var j = 0 ;j < $(".enter_ip").length;j++){           
    //         if($(".enter_ip").eq(j).val()==""){
    //            $(".enter_ip").eq(j).focus();
    //            tip_ct = "请填写完毕再提交";
    //            tips.addtips(tip_ct);
    //            return false;
    //         }
    //     };
    //     // 关注领域选中状态
    //     var li = $(".areas_main li");        
    //     for(var i = 0;i < li.length ; i++){
    //         if( li.eq(i).hasClass('areas_selected') ){               
    //              lingyu_html = li.eq(i).html();
    //         }
    //     };
    //     if(count < 1){
    //         tip_ct = "请选择关注领域";
    //         tips.addtips(tip_ct);
    //         return false;
    //     }
    //     else{
    //         var t = $("#formID").serializeArray();
    //         $.each(t, function(){
    //             data[this.name] = this.value;
    //         });
    //         data['hd_id'] = hd_id;
    //         data['lingyu'] = lingyu_html;
    //         data['user_id'] = $("#user_id").val();
    //         $.ajax({
    //             type:'post',
    //             url:'/index.php/Mobile/Activity/enter',
    //             data:data,
    //             dataType:'json',
    //             success:function(res) {
    //                 if(res.result == 1){
    //                     $(".identify_tip2").show();
    //                     $(".mask").show();
    //                     return false;
    //                 }
    //             }
    //         })
    //     }
    // })


</script>
</html>